============================= test session starts ==============================
platform darwin -- Python 3.10.8, pytest-9.0.2, pluggy-1.6.0 -- /Users/mostafa/miniforge3/bin/python
cachedir: .pytest_cache
rootdir: /Users/mostafa/Documents/workplace/NL2SQL
configfile: pyproject.toml
plugins: anyio-4.12.1, mock-3.15.1, langsmith-0.6.9, timeout-2.4.0, asyncio-1.3.0
asyncio: mode=auto, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 64 items

tests/unit/test_bird_loader.py::test_load_returns_list_of_bird_entries PASSED [  1%]
tests/unit/test_bird_loader.py::test_all_fields_populated PASSED         [  3%]
tests/unit/test_bird_loader.py::test_db_id_is_string PASSED              [  4%]
tests/unit/test_bird_loader.py::test_difficulty_in_valid_set PASSED      [  6%]
tests/unit/test_bird_loader.py::test_evidence_can_be_empty_string PASSED [  7%]
tests/unit/test_bird_loader.py::test_missing_file_returns_empty_list PASSED [  9%]
tests/unit/test_database.py::test_valid_select_returns_rows PASSED       [ 10%]
tests/unit/test_database.py::test_syntax_error_returns_failure PASSED    [ 12%]
tests/unit/test_database.py::test_empty_result_returns_is_empty PASSED   [ 14%]
tests/unit/test_database.py::test_execution_time_is_measured PASSED      [ 15%]
tests/unit/test_database.py::test_timeout_kills_hanging_query PASSED     [ 17%]
tests/unit/test_database.py::test_cartesian_product_protection PASSED    [ 18%]
tests/unit/test_profiler.py::TestColumnCountMatchesSchema::test_column_count_matches_schema PASSED [ 20%]
tests/unit/test_profiler.py::TestColumnCountMatchesSchema::test_tables_list PASSED [ 21%]
tests/unit/test_profiler.py::TestNullRateComputation::test_name_null_rate PASSED [ 23%]
tests/unit/test_profiler.py::TestNullRateComputation::test_gpa_null_rate PASSED [ 25%]
tests/unit/test_profiler.py::TestNullRateComputation::test_age_null_rate_is_zero PASSED [ 26%]
tests/unit/test_profiler.py::TestNullRateComputation::test_null_count_values PASSED [ 28%]
tests/unit/test_profiler.py::TestDistinctCount::test_name_distinct_count PASSED [ 29%]
tests/unit/test_profiler.py::TestDistinctCount::test_id_distinct_count PASSED [ 31%]
tests/unit/test_profiler.py::TestSampleValuesOrdering::test_name_sample_values_alice_first PASSED [ 32%]
tests/unit/test_profiler.py::TestSampleValuesOrdering::test_name_sample_values_bob_second PASSED [ 34%]
tests/unit/test_profiler.py::TestSampleValuesOrdering::test_sample_values_no_nulls PASSED [ 35%]
tests/unit/test_profiler.py::TestSampleValuesOrdering::test_sample_values_at_most_10 PASSED [ 37%]
tests/unit/test_profiler.py::TestPrimaryKeyDetection::test_students_id_is_pk PASSED [ 39%]
tests/unit/test_profiler.py::TestPrimaryKeyDetection::test_students_name_is_not_pk PASSED [ 40%]
tests/unit/test_profiler.py::TestPrimaryKeyDetection::test_countries_code_is_pk PASSED [ 42%]
tests/unit/test_profiler.py::TestNumericStats::test_age_min_value PASSED [ 43%]
tests/unit/test_profiler.py::TestNumericStats::test_age_max_value PASSED [ 45%]
tests/unit/test_profiler.py::TestNumericStats::test_age_avg_value_not_none PASSED [ 46%]
tests/unit/test_profiler.py::TestNumericStats::test_text_column_has_no_numeric_stats PASSED [ 48%]
tests/unit/test_profiler.py::TestForeignKeyDetection::test_students_country_fk PASSED [ 50%]
tests/unit/test_profiler.py::TestForeignKeyDetection::test_students_id_no_fk PASSED [ 51%]
tests/unit/test_profiler.py::TestForeignKeyDetection::test_db_foreign_keys_list PASSED [ 53%]
tests/unit/test_profiler.py::TestMinhashGeneration::test_minhash_length PASSED [ 54%]
tests/unit/test_profiler.py::TestMinhashGeneration::test_minhash_all_integers PASSED [ 56%]
tests/unit/test_profiler.py::TestMinhashGeneration::test_minhash_deterministic PASSED [ 57%]
tests/unit/test_profiler.py::TestEmptyTableHandling::test_empty_table PASSED [ 59%]
tests/unit/test_profiler.py::TestProfileJsonSerialization::test_json_round_trip PASSED [ 60%]
tests/unit/test_profiler.py::TestProfileJsonSerialization::test_json_has_expected_keys PASSED [ 62%]
tests/unit/test_profiler.py::TestProfileJsonSerialization::test_json_columns_have_expected_fields PASSED [ 64%]
tests/unit/test_profiler.py::TestCaching::test_cache_write_and_load PASSED [ 65%]
tests/unit/test_profiler.py::TestCaching::test_cache_file_created PASSED [ 67%]
tests/unit/test_summarizer.py::TestBatchingGroupsByTable::test_batching_groups_by_table PASSED [ 68%]
tests/unit/test_summarizer.py::TestSummaryFieldsPresent::test_summary_fields_present PASSED [ 70%]
tests/unit/test_summarizer.py::TestShortSummaryLengthBound::test_short_summary_length_bound PASSED [ 71%]
tests/unit/test_summarizer.py::TestLongSummaryLengthBound::test_long_summary_length_bound PASSED [ 73%]
tests/unit/test_summarizer.py::TestAllColumnsCovered::test_all_columns_covered PASSED [ 75%]
tests/unit/test_summarizer.py::TestApiErrorPropagates::test_api_error_propagates PASSED [ 76%]
tests/unit/test_summarizer.py::TestCacheHitSkipsApi::test_cache_hit_skips_api PASSED [ 78%]
tests/unit/test_summarizer.py::TestCacheWriteOnSuccess::test_cache_write_on_success PASSED [ 79%]
tests/unit/test_summarizer.py::TestToolUseFormatParsing::test_tool_use_format_parsing PASSED [ 81%]
tests/unit/test_summarizer.py::TestMissingColumnGetsDefaultSummary::test_missing_column_gets_default_summary PASSED [ 82%]
tests/unit/test_schema_formatter.py::test_ddl_contains_all_tables PASSED [ 84%]
tests/unit/test_schema_formatter.py::test_ddl_contains_all_columns PASSED [ 85%]
tests/unit/test_schema_formatter.py::test_ddl_injects_summaries PASSED   [ 87%]
tests/unit/test_schema_formatter.py::test_ddl_primary_key_notation PASSED [ 89%]
tests/unit/test_schema_formatter.py::test_ddl_foreign_key_comments PASSED [ 90%]
tests/unit/test_schema_formatter.py::test_markdown_has_header_per_table PASSED [ 92%]
tests/unit/test_schema_formatter.py::test_markdown_table_row_count PASSED [ 93%]
tests/unit/test_schema_formatter.py::test_sample_values_truncation PASSED [ 95%]
tests/unit/test_schema_formatter.py::test_special_character_escaping PASSED [ 96%]
tests/unit/test_schema_formatter.py::test_deterministic_output PASSED    [ 98%]
tests/unit/test_schema_formatter.py::test_format_and_save_schemas_creates_files PASSED [100%]

============================== 64 passed in 0.70s ==============================
